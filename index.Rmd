---
title: "Beaches in Galicia"
author: "David Metacarpa, Caroline Tilton, and Luis de Pablo"
date: "December 8, 2021"
output:
 rmdformats::material:
   thumbnails: false
   highlight: "kate"
---

```{r setup, include = FALSE}
library(tidyverse)
library(rmdformats)
library(kableExtra) # for example code; delete if not needed

library(vegan)
library(usedist)

# Set code chunk defaults
knitr::opts_chunk$set(echo = FALSE,
                     mesage = FALSE,
                     warning = FALSE,
                     fig.align = "center")

# Set R environment options
options(knitr.kable.NA = '')
beaches <- read_csv("beachData.csv")
controlSummary<- read.csv("controlSummary.csv")
controlSummary <- controlSummary%>%
  select(-  X)

```

# What Makes the Beaches in Galicia Unique?

## Playa America, Carnota, Corrubedo, Barra, Nerga, Lanzada, and Samil

### How do nutrients levels, algal cover, fauna diversity, pitch, and sediment levels vary between these beaches?


<!-- Add photo -->

```{r, fig.cap = "Photo was taken just outside of Playa de Soesto"}
knitr::include_graphics("/Users/carrie/Desktop/Stat 231/blog_los-hermanos-intermareales-main/20201201_132238 copy.jpg")
```

Our blog is intended to inform users about the sediment nutrients, algal cover, fauna diversity, and locations of eight different sites in Galicia, Spain: Playa America, Carnota, Corrubedo, Barra, Nerga, Lanzada, and Samil. Our blog is centered around a shiny app that includes five different visualizations of beach characteristic variance. All of the visualizations have interactive widgets that allow users to compare different sites, treatments, and nutrients levels, as well as allowing users to click on and view the beaches where the data was collected.

We decided to focus on the individual characteristics of eight different beaches in Spain and how the beaches vary in biodiversity and geography. The data that we wrangled and analysed included species types, nutrients levels, locations, beach pitches, similarity, and experimental biodiversity levels.For each of the eight beaches, six samples of sediment, interstitial water, and surf water were analyzed for nutrient content of PO4, NO2 + NO3, and NH4. We looked at PO4 specifically because of the impact that it has on biodiversity in the area.

The data centered around biodiversity was taken during an experiment that compared biodiversity levels when bait was left in the sand. In the field, researchers collected sediment cores from about knee-deep in the water off the beach. These cores were taken back to the lab, where researchers identified all the species present and logged the number of representatives for each species. These data were used to estimate the density per square meter of each species, and it was used to identify the organism diversity found after three different treatments. The treatments included placing a piece of “bait” (squid) in the sand for 10 and 20 minutes, and after the duration of the treatment a 1m^2 core sample was taken from the sand.


This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For example, you can include **Bold** and _Italic_ and `Code` text.  For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

You should test out updating your GitHub Pages website:

* clone your group's blog project repo in RStudio
* update "Your Project Title Here" to a new title in the YAML header
* knit `index.Rmd` (we will now knit to HTML by default instead of pdf)
* commit and push **both** `index.Rmd` and `index.html`
* go to https://stat231-f21.github.io/blog_los-hermanos-intermareales/ to see the published test document (this is publicly available!)

## Including code and plots

You can embed code as normal, for example:

```{r cars}
summary(cars)
```

Let's clean up the format of that output instead of using the standard R output:

```{r pretty-table, echo = TRUE}
summary(cars) %>%
 kable(col.names = c("Speed", "Distance"),
       row.names = FALSE) %>%
 kable_styling(bootstrap_options = "striped",
               full_width = FALSE) %>%
 row_spec(0, bold = TRUE) %>%
 column_spec(1:2, width = "1.5in")
```

In a study from the 1920s, fifty cars were used to see how the speed of the car and the distance taken to stop were related.  Speeds ranged between `r min(cars$speed)` and `r max(cars$speed)` mph.  Distances taken to stop ranged between `r min(cars$dist)` and `r max(cars$dist)` feet, with the middle 50% falling between `r as.numeric(quantile(cars$dist)[2])` and `r as.numeric(quantile(cars$dist)[4])` feet. 

You can also embed plots as normal, for example:

```{r figure1}
ggplot(data = cars, aes(x = speed, y = dist)) +
 geom_point() +
 labs(x = "Speed of car (mph)",
      y = "Distance taken to stop (ft)",
      title = "Stopping distance increases with faster speeds",
      subtitle = "Based on 1920s study") +
 theme_classic()
```

Take note of the default code chunk options in the `setup` code chunk, and adjust individual code chunk options as needed. for example, unlike the rest of the Rmd files we worked in this semester, the default code chunk option is `echo = FALSE`, so you will need to set `echo  = TRUE` for any code chunks you would like to display in the blog.


## Including links and images/videos

You can include [links](https://www.datadreaming.org/post/r-markdown-theme-gallery/) and there are a few ways to embed  images! Both options for embedding images below can be used interchangeably. They both work for png, pdf, jpg, and even gif formats, and both support filepaths that are either URLs (for videos, you can include links to any valid YouTube or Vimeo URLs; see [here](https://bookdown.org/yihui/rmarkdown/learnr-videos.html) for more details) or point to a location within your project directory.

### Option 1: Markdown approach

![This is a figure caption. The artwork is called Safe Space by  [Kenesha Sneed](https://www.keneshasneed.com/#/safespace/)](img/Kenesha-Sneed_safe-space.jpeg)


### Option 2: Code chunk approach

```{r, fig.cap = "This is also figure caption"}
knitr::include_graphics("https://media.giphy.com/media/H7ZrrA9V2pd3Tehdds/giphy.gif")
```

## Including equations

Equations may be needed if you are explaining a new technique or perhaps providing some other relevant formulas in your exposition. There are two ways to include equations:

* Inline: $b \sim N(0, \sigma^2_b)$
* Display-style (displayed on its own line): $$\frac{\sigma^2_b}{\sigma^2_b + \sigma^2_e}$$

For typesetting equations appropriately, take a look at the *Symbols in math mode* section of this  [cheat sheet](https://users.dickinson.edu/~richesod/latex/latexcheatsheet.pdf)  (or do some extra Googling---there are *many* resources).


<!-- add new tabs -->
# Beach Views {.tabset .tabset-fade .tabset-pills}

```{r, fig.cap = "This is also figure caption", echo = TRUE}
#interactive map
library(leaflet)

#leaflet(data = beaches) %>%
 # addTiles() %>%
 # addMarkers()

```
# Similarity maps {.tabset .tabset-fade .tabset-pills}
```{r, fig.cap = "This is also figure caption", echo = TRUE}

#FIGURE OUT HOW TO GET AMERICA 1 NAME BACK ON THIS GRAPH

#jaccard similarity index comparison/groupings
jaccard <- vegdist(controlSummary[-1], method = "jaccard")

names <- controlSummary[[1]]
jaccard <- dist_setNames(jaccard, names)

plot(
  hclust(jaccard),
  hang = -1,
  main = "Sites clustered by Jaccard similarity",
  axes = FALSE, ylab = "")
```

# Fauna Diversity {.tabset .tabset-fade .tabset-pills}
```{r, fig.cap = "This is also figure caption"}
  #comparison of treatments
diversityData <- beaches %>%
  select(c("site", "controlDiversity", "tenMinDiversity", "twentyMinDiversity")) %>%
  pivot_longer(-site, names_to = "treatment", values_to = "diversity")

diversityData$treatment <- str_replace_all(diversityData$treatment, pattern = "tenMinDiversity", replacement = "10")
diversityData$treatment <- str_replace_all(diversityData$treatment, pattern = "twentyMinDiversity", replacement = "20")
diversityData$treatment <- str_replace_all(diversityData$treatment, pattern = "controlDiversity", replacement = "control")

#average diversity between treatments
ggplot(data = diversityData, aes(x = treatment, y = diversity)) +
  geom_boxplot()
```
We can add text here to describe the plots of diversity based on treatment
```{r, fig.cap = "This is also figure caption"}

ggplot(data = diversityData, aes(x = treatment, y = diversity)) +
  geom_col(aes(fill = treatment)) +
  scale_color_brewer() +
  theme_bw() +
  facet_wrap(~ site)

```
# Algae Cover {.tabset .tabset-fade .tabset-pills}
```{r, fig.cap = "This is also figure caption"}
#ASK ABOUT THE LITTLE GREY OUTPUTS AT THE TOP AND HOW TO INCLUDE CODE CHUNK
#algae cover vs nutrients
ggplot(data = beaches, aes(x = po4SedMean, y = algaePercentCover)) +
  geom_point() +
  geom_smooth(method = 'lm') +
  ylim(0, 4)

```
# Nutrients Levels {.tabset .tabset-fade .tabset-pills}
```{r, fig.cap = "This is also figure caption"}
#assemble plots of nutrient data
library(cowplot)

sedpo4 <- ggplot(data = beaches, aes(x = po4SedMean, y = controlDiversity)) +
  geom_point() +
  geom_smooth(method = 'lm')

sedno2no3 <- ggplot(data = beaches, aes(x = no2no3SedMean, y = controlDiversity)) +
  geom_point() +
  geom_smooth(method = 'lm')

plot_grid(sedpo4, sedno2no3)
```
# Sediment Levels {.tabset .tabset-fade .tabset-pills}


Every subsection heading (starting with `##`) until you create a new section heading (starting with `#`) will be a new tab.

## Bulleted list

You can make a bulleted list like this:

* item 1
* item 2
* item 3


## Numbered list

You can make a numbered list like this

1. First thing I want to say
2. Second thing I want to say
3. Third thing I want to say

# Customizing your blog design

As a *final* detail **only** if you have time, you can explore options for customizing the style of your blog. By default, we are using the `readthedown` theme from the [**rmdformats** package](https://github.com/juba/rmdformats) (see Line 6 of this file if you want to switch out themes). There are, I'm sure, many many many more similar packages with built in themes, or you can look into how to include a CSS code chunk to customize aspects of the current theme. 

There are some easy-to-change options that you can play around with:

* The theme itself (Line 6): `rmdformats::readthedown`, `rmdformats::downcute`, `rmdformats::robobook`, `rmdformats::material`,
 * For `downcute` only, you can add a new indented line below Line 6 with the code `downcute_theme: "chaos"` for the `downcute chaos` theme
 * I would *not* recommend the other themes that do not have the sidebar navigation

* Syntax highlighting options (Line 8, `highlight`): `"default"`, `"tango"`, `"pygments"`, `"kate"`, `"monochrome"`, `"espresso"`, `"zenburn"`, `"haddock"`, or `"textmate"` (or `NULL` for no syntax highlighting)


You can explore additional customizable YAML options by looking at the [**rmdformats** package](https://github.com/juba/rmdformats) page or running, for example, `?rmdformats::readthedown()` to see the help documentation for a particular theme from the package.